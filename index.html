<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Valentine's Access Portal üíó</title>
        <link rel="stylesheet" href="styles.css">
        <script src="https://unpkg.com/gsap@3/dist/gsap.min.js" defer></script>
        <script type="module" src="script.js"></script>
    </head>
    <body>

        <canvas id="starfield"></canvas>
        <div id="hearts" aria-hidden="true"></div>

        <div id="lockScreen" class="glass-card">
            <h2>Valentine‚Äôs Access Portal üíó</h2>
            <p class="muted">Answer correctly to unlock our love archive.</p>

            <form id="unlockForm">
                <label>When did we start dating?
                    <input id="q-date" type="date" required>
                </label>

                <label>What‚Äôs Himal‚Äôs favorite color?
                    <input id="q-color" type="text" placeholder="e.g. lavender" required>
                </label>

                <label>Where was our first date?
                    <input id="q-place" type="text" placeholder="City / Place" required>
                </label>

                <div class="controls">
                    <button id="unlockBtn" type="submit" class="accent">Unlock</button>
                    <button id="demoBtn" type="button" class="ghost">Demo (skip)</button>
                </div>
            </form>
        </div>

        <main id="main" class="hidden">
            <header class="topbar">
                <div class="header-title">
                    <h1 class="love-title" id="loveTitle">
                        <span class="love-text">Our Love Story ‚òÖ Since</span>
                        <span id="sinceDate" class="love-date">June 22, 2022</span>
                        <span class="love-hearts" aria-hidden="true">
                            <span class="love-heart heart-1">‚ù§</span>
                            <span class="love-heart heart-2">‚ù§</span>
                            <span class="love-heart heart-3">‚ù§</span>
                        </span>
                    </h1>
                </div>
                <div class="now-playing" id="nowPlaying" role="region" aria-label="Music player">
                    <div class="cd" aria-hidden="true">üíø</div>
                    <div class="song-info">
                        <div class="song-meta">
                            <div class="now-playing-label">Now Playing</div>
                            <div id="songTitle" class="song-title">‚Äî</div>
                        </div>
                        <div class="progress-row" role="group" aria-label="Playback progress">
                            <span id="currentTime" class="timecode">0:00</span>
                            <input id="progressBar" class="audio-slider progress-slider" type="range" min="0" max="100" value="0" step="0.1" aria-label="song progress">
                            <span id="durationTime" class="timecode">0:00</span>
                        </div>
                        <div class="audio-controls">
                            <button id="prevBtn" class="rocker-btn" type="button" aria-label="previous track">‚èÆ</button>
                            <button id="playPause" class="play-btn" type="button" aria-label="play or pause music">Play</button>
                            <button id="stopBtn" class="rocker-btn" type="button" aria-label="stop">‚èπ</button>
                            <button id="nextBtn" class="rocker-btn" type="button" aria-label="next track">‚è≠</button>
                            <input id="volumeSlider" class="audio-slider" type="range" min="0" max="100" value="80" aria-label="volume control">
                            <button id="uploadMusicBtn" class="rocker-btn" type="button" aria-label="upload music" title="Upload Music">üì§</button>
                        </div>
                    </div>
                </div>
            </header>

            <section class="carousel-wrap" role="region" aria-label="Photo carousel">
                <button class="nav left" aria-label="View previous photo" type="button">‚óÄ</button>
                <div class="carousel" id="carousel" role="img" aria-live="polite" aria-label="Carousel showing memories from our relationship">
                </div>
                <button class="nav right" aria-label="View next photo" type="button">‚ñ∂</button>
            </section>

            <div class="dots" id="dots" role="tablist" aria-label="Photo selection"></div>

            <div class="add-photo-btn-wrap">
                <button id="addPhotoBtn" class="add-photo-btn" type="button">+ Add Photo</button>
            </div>

            <aside class="extras" role="region" aria-label="Statistics">
                <div class="counter">Visitors: <span id="visitorCount">0</span></div>
                <div class="countdown">Next Valentine: <span id="countdown">‚Äî</span></div>
            </aside>

            <!-- Notes Section -->
            <section class="timeline" id="timeline">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                    <h2>Notes</h2>
                    <button id="addNoteBtn" class="add-photo-btn" type="button" style="margin:0;">+ Add Note</button>
                </div>
                <ol id="timelineList"></ol>
            </section>

            <section class="polaroids" id="polaroids" aria-label="Scattered memories"></section>

            <footer class="footer">A private love archive ‚Äî made with care ‚ú®</footer>
        </main>

        <div id="modal" class="modal hidden" role="dialog" aria-hidden="true">
            <div class="modal-inner glass-card">
                <button class="close" id="modalClose">‚úï</button>
                <h3 id="modalTitle">Memory</h3>
                <div id="modalContent"></div>
            </div>
        </div>

        <div id="noteModal" class="modal hidden" role="dialog" aria-hidden="true">
            <div class="modal-inner glass-card">
                <button class="close" id="noteModalClose">‚úï</button>
                <h3>Add a Note</h3>
                <form id="noteForm">
                    <label for="noteDate">Date:
                        <input id="noteDate" type="date" required>
                    </label>
                    <label for="noteTitle">Title:
                        <input id="noteTitle" type="text" placeholder="e.g. Our Anniversary" required>
                    </label>
                    <label for="noteDescription">Description:
                        <textarea id="noteDescription" placeholder="Write your note here..." required style="min-height:100px;resize:vertical;"></textarea>
                    </label>
                    <button type="submit" class="accent">Add Note</button>
                </form>
            </div>
        </div>

        <div id="uploadModal" class="modal hidden" role="dialog" aria-hidden="true">
            <div class="modal-inner glass-card">
                <button class="close" id="uploadModalClose">‚úï</button>
                <h3>Add a Photo</h3>
                <form id="uploadForm">
                    <label for="uploadPassword">Password:
                        <input id="uploadPassword" type="password" placeholder="Enter password" required>
                    </label>
                    <label for="uploadFile">Select Photo:
                        <input id="uploadFile" type="file" accept="image/*" required>
                    </label>
                    <label for="uploadCaption">Caption (optional):
                        <input id="uploadCaption" type="text" placeholder="e.g. Beach Day">
                    </label>
                    <button type="submit" class="accent">Upload</button>
                </form>
            </div>
        </div>

        <!-- YOUTUBE PLAYER UI - START -->
        <div id="musicModal" class="modal hidden" role="dialog" aria-hidden="true">
            <div class="modal-inner glass-card">
                <button class="close" id="musicModalClose">‚úï</button>
                <h3>Upload Music</h3>
                <form id="musicForm">
                    <label for="musicFile">Select MP3:
                        <input id="musicFile" type="file" accept="audio/mpeg" required>
                    </label>
                    <label for="musicTitle">Song Title (optional):
                        <input id="musicTitle" type="text" placeholder="e.g. Our Favorite Song">
                    </label>
                    <button type="submit" class="accent">Upload</button>
                </form>
            </div>
        </div>

        <!-- MUSIC LIBRARY PANEL - START -->
        <div id="musicLibraryPanel" class="music-library-panel">
            <div class="library-header">
                <h4>Music Library</h4>
                <div class="library-header-buttons">
                    <button id="loopToggleBtn" class="library-btn" type="button" title="Toggle Loop">üîÅ</button>
                    <button id="toggleLibraryBtn" class="library-btn" type="button" title="Toggle Library">‚ñº</button>
                </div>
            </div>
            <div class="library-content">
                <div id="musicLibraryList" class="library-list"></div>
            </div>
        </div>
        <!-- MUSIC LIBRARY PANEL - END -->

        <script src="youtube-player.js"></script>
    </body>
</html>
